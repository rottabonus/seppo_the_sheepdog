[gd_scene load_steps=14 format=3 uid="uid://bmt4hdxamxuqo"]

[ext_resource type="Script" path="res://main.gd" id="1_l7bfh"]
[ext_resource type="Texture2D" uid="uid://bv5tpjy6v1e2v" path="res://img/barn.png" id="2_7i3mb"]
[ext_resource type="PackedScene" uid="uid://h7jba8nvsxed" path="res://scenes/sheep/sheep.tscn" id="2_7ibej"]
[ext_resource type="Texture2D" uid="uid://byxyu54kbx5oj" path="res://img/background2.png" id="2_safr2"]
[ext_resource type="PackedScene" uid="uid://bor04e6fwvy54" path="res://scenes/player/player.tscn" id="3_xidrt"]
[ext_resource type="Texture2D" uid="uid://hk2u60u77e4e" path="res://img/tractor_1.png" id="4_fnv6r"]
[ext_resource type="PackedScene" uid="uid://ddxqu8jb34qkf" path="res://scenes/misc/fence_tilemap.tscn" id="4_rq03n"]
[ext_resource type="PackedScene" uid="uid://byna2mjx2aih3" path="res://scenes/misc/herding_zone.tscn" id="6_ejh20"]
[ext_resource type="PackedScene" uid="uid://dqdul2urs16s4" path="res://scenes/master/master.tscn" id="7_5c1k4"]
[ext_resource type="AudioStream" uid="uid://bet7kpqn4v1qk" path="res://sound/SeppoDub.wav" id="8_mxg0j"]
[ext_resource type="PackedScene" uid="uid://ch12vtv75ur8d" path="res://scenes/misc/hud.tscn" id="10_xpaxw"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_a2s0x"]
size = Vector2(25, 400)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_pww50"]
size = Vector2(671.5, 20)

[node name="Main" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_l7bfh")

[node name="Ground" type="CanvasLayer" parent="."]
layer = -2

[node name="Grass" type="ColorRect" parent="Ground"]
offset_left = -76.0
offset_top = 2.0
offset_right = 655.0
offset_bottom = 414.0
color = Color(0.492159, 0.535593, 0.324513, 1)

[node name="Background" type="CanvasLayer" parent="."]
layer = -1
follow_viewport_enabled = true

[node name="Barn" type="TextureRect" parent="Background"]
offset_left = 698.0
offset_top = -10.0
offset_right = 936.0
offset_bottom = 196.0
texture = ExtResource("2_7i3mb")

[node name="Birches" type="TextureRect" parent="Background"]
offset_left = -242.0
offset_top = -117.0
offset_right = 778.0
offset_bottom = -2.0
texture = ExtResource("2_safr2")

[node name="Tractor" type="TextureRect" parent="Background"]
offset_left = -214.0
offset_top = 312.0
offset_right = -93.0
offset_bottom = 387.0
texture = ExtResource("4_fnv6r")
flip_h = true

[node name="HerdingZone" parent="." groups=["HerdingZone"] instance=ExtResource("6_ejh20")]
position = Vector2(379, 140)
goal = 5
herding_max = 45

[node name="Player" parent="." instance=ExtResource("3_xidrt")]
y_sort_enabled = true
position = Vector2(90, 58)

[node name="Sheep" parent="." instance=ExtResource("2_7ibej")]
position = Vector2(276, 159)

[node name="Sheep2" parent="." instance=ExtResource("2_7ibej")]
position = Vector2(249, 106)

[node name="Sheep3" parent="." instance=ExtResource("2_7ibej")]
position = Vector2(273, 210)

[node name="Sheep4" parent="." instance=ExtResource("2_7ibej")]
position = Vector2(318, 129)

[node name="Sheep5" parent="." instance=ExtResource("2_7ibej")]
position = Vector2(348, 192)

[node name="FenceTileMap" parent="." instance=ExtResource("4_rq03n")]
position = Vector2(-1, 1)
layer_0/tile_data = PackedInt32Array(-131072, 196608, 0, -65536, 196608, 1, -131071, 65536, 0, -65535, 65536, 1, -131070, 0, 0, -65534, 0, 1, -131069, 65536, 0, -65533, 65536, 1, -131068, 0, 0, -65532, 0, 1, -131067, 65536, 0, -65531, 65536, 1, -131066, 131072, 0, -65530, 131072, 1, -131065, 196608, 0, -65529, 196608, 1, -131064, 131072, 0, -65528, 131072, 1, -131063, 196608, 0, -65527, 196608, 1, -131062, 0, 2, -65526, 0, 3, -131061, 65536, 2, -65525, 65536, 3, -131060, 131072, 2, -65524, 131072, 3, -131059, 196608, 2, -65523, 196608, 3, -131058, 0, 0, -65522, 0, 1, -131057, 65536, 0, -65521, 65536, 1, -131056, 131072, 0, -65520, 131072, 1, -131055, 196608, 0, -65519, 196608, 1, -131052, 131072, 0, -65516, 131072, 1, -131051, 196608, 0, -65515, 196608, 1, -131048, 131072, 0, -65512, 131072, 1, -131047, 196608, 0, -65511, 196608, 1, -131046, 131072, 0, -65510, 131072, 1, -131045, 196608, 0, -65509, 196608, 1, -131050, 0, 0, -65514, 0, 1, -131049, 65536, 0, -65513, 65536, 1, -131044, 0, 2, -65508, 0, 3, -131043, 65536, 2, -65507, 65536, 3, -131042, 131072, 2, -65506, 131072, 3, -131041, 196608, 2, -65505, 196608, 3, -131054, 131072, 2, -65518, 131072, 3, -131053, 196608, 2, -65517, 196608, 3, -131034, 131072, 2, -65498, 131072, 3, -131033, 196608, 2, -65497, 196608, 3, -131040, 0, 0, -65504, 0, 1, -131039, 65536, 0, -65503, 65536, 1, -131038, 131072, 0, -65502, 131072, 1, -131037, 196608, 0, -65501, 196608, 1, -131036, 0, 2, -65500, 0, 3, -131035, 65536, 2, -65499, 65536, 3, 65530, 262144, 1, 131066, 262144, 1, 196602, 262144, 2, 262138, 262144, 3, 327674, 262144, 0, 393210, 262144, 1, 458746, 262144, 2, 524282, 262144, 3, 589818, 262144, 0, 655354, 262144, 1, 720890, 262144, 2, 786426, 262144, 3, 851962, 262144, 0, 917498, 262144, 1, 983034, 262144, 2, 1048570, 262144, 3, 1114106, 262144, 0, 1179642, 262144, 1, 1245178, 262144, 2, 1310714, 262144, 3, 1376250, 262144, 0, 1441786, 262144, 0, 65531, 327680, 1, 131067, 327680, 1, 196603, 327680, 2, 262139, 327680, 3, 327675, 327680, 0, 393211, 327680, 1, 458747, 327680, 2, 524283, 327680, 3, 589819, 327680, 0, 655355, 327680, 1, 720891, 327680, 2, 786427, 327680, 3, 851963, 327680, 0, 917499, 327680, 1, 983035, 327680, 2, 1048571, 327680, 3, 1114107, 327680, 0, 1179643, 327680, 1, 1245179, 327680, 2, 1310715, 327680, 3, 1376251, 327680, 0, 1441787, 327680, 0, 65576, 262144, 0, 131112, 262144, 1, 196648, 262144, 0, 262184, 262144, 1, 327720, 262144, 2, 393256, 262144, 3, 458792, 262144, 1, 524328, 262144, 2, 589864, 262144, 3, 655400, 262144, 0, 720936, 262144, 1, 786472, 262144, 2, 852008, 262144, 3, 917544, 262144, 2, 983080, 262144, 3, 1048616, 262144, 0, 1114152, 262144, 1, 1179688, 262144, 2, 1245224, 262144, 3, 1310760, 262144, 0, 1376296, 262144, 1, 65577, 327680, 0, 131113, 327680, 1, 196649, 327680, 0, 262185, 327680, 1, 327721, 327680, 2, 393257, 327680, 3, 458793, 327680, 1, 524329, 327680, 2, 589865, 327680, 3, 655401, 327680, 0, 720937, 327680, 1, 786473, 327680, 2, 852009, 327680, 3, 917545, 327680, 2, 983081, 327680, 3, 1048617, 327680, 0, 1114153, 327680, 1, 1179689, 327680, 2, 1245225, 327680, 3, 1310761, 327680, 0, 1376297, 327680, 1, 1441833, 327680, 2, 1507369, 327680, 3, 1703935, 196608, 1, 1638400, 131072, 3, 1572865, 65536, 2, 1638401, 65536, 3, 1572866, 0, 2, 1638402, 0, 3, 1572867, 65536, 2, 1638403, 65536, 3, 1572868, 131072, 2, 1638404, 131072, 3, 1572869, 196608, 2, 1638405, 196608, 3, 1572870, 0, 2, 1638406, 0, 3, 1572871, 65536, 2, 1638407, 65536, 3, 1572872, 0, 2, 1638408, 0, 3, 1572873, 65536, 2, 1638409, 65536, 3, 1572874, 131072, 2, 1638410, 131072, 3, 1572875, 196608, 2, 1638411, 196608, 3, 1572876, 131072, 2, 1638412, 131072, 3, 1572877, 196608, 2, 1638413, 196608, 3, 1572878, 196608, 2, 1638414, 196608, 3, 1572879, 0, 2, 1638415, 0, 3, 1572880, 65536, 2, 1638416, 65536, 3, 1572881, 131072, 2, 1638417, 131072, 3, 1572882, 131072, 2, 1638418, 131072, 3, 1572883, 196608, 2, 1638419, 196608, 3, 1572884, 131072, 2, 1638420, 131072, 3, 1572885, 196608, 2, 1638421, 196608, 3, 1572886, 131072, 0, 1638422, 131072, 1, 1572887, 196608, 0, 1638423, 196608, 1, 1572888, 0, 0, 1638424, 0, 1, 1572889, 65536, 0, 1638425, 65536, 1, 1572890, 131072, 0, 1638426, 131072, 1, 1572891, 196608, 0, 1638427, 196608, 1, 1572892, 0, 0, 1638428, 0, 1, 1572893, 65536, 0, 1638429, 65536, 1, 1572894, 131072, 0, 1638430, 131072, 1, 1572895, 196608, 0, 1638431, 196608, 1, 1572896, 131072, 2, 1638432, 131072, 3, 1572897, 196608, 2, 1638433, 196608, 3, 1572898, 0, 2, 1638434, 0, 3, 1572899, 65536, 2, 1638435, 65536, 3, 1572900, 0, 0, 1638436, 0, 1, 1572901, 65536, 0, 1638437, 65536, 1, 1572902, 131072, 0, 1638438, 131072, 1, 1638440, 196608, 3, 1572904, 262144, 2, 1572905, 327680, 0, 1572903, 196608, 0, 1638439, 196608, 1, 1572864, 196608, 2, 1638396, 0, 0, 1703932, 0, 1, 1638397, 65536, 0, 1703933, 65536, 1, 1638398, 131072, 0, 1703934, 131072, 1, 1638399, 196608, 0, 1638395, 327680, 3, 1703931, 0, 3, 1507322, 262144, 1, 1572858, 262144, 2, 1638394, 262144, 3, 1507323, 327680, 1, 1572859, 327680, 2, -65539, 0, 0, -3, 0, 1, -65538, 65536, 0, -2, 65536, 1, -65537, 131072, 0, -1, 131072, 1, -65541, 131072, 2, -5, 196608, 1, -65540, 196608, 2, -4, 196608, 3, -6, 262144, 0, -65496, 196608, 1, 40, 262144, 1, -65495, 327680, 0, 41, 327680, 1, -131032, 131072, 0, 1441832, 262144, 0, 1507368, 262144, 1)

[node name="Master" parent="." instance=ExtResource("7_5c1k4")]
y_sort_enabled = true
position = Vector2(306, 21)

[node name="Foreground" type="CanvasLayer" parent="."]
layer = 0
follow_viewport_enabled = true

[node name="TextureRect" type="TextureRect" parent="Foreground"]
z_as_relative = false
offset_left = -237.0
offset_top = 394.0
offset_right = 783.0
offset_bottom = 509.0
texture = ExtResource("2_safr2")

[node name="MasterCallTimer" type="Timer" parent="."]
wait_time = 30.0
one_shot = true
autostart = true

[node name="CallLoop" type="Timer" parent="."]
wait_time = 5.0

[node name="MainMusic" type="AudioStreamPlayer" parent="."]
stream = ExtResource("8_mxg0j")

[node name="HUD" parent="." instance=ExtResource("10_xpaxw")]

[node name="SheepNoGoZone" type="StaticBody2D" parent="."]
collision_layer = 4
collision_mask = 0

[node name="Left" type="CollisionShape2D" parent="SheepNoGoZone"]
position = Vector2(-60.5, 203)
shape = SubResource("RectangleShape2D_a2s0x")

[node name="Right" type="CollisionShape2D" parent="SheepNoGoZone"]
position = Vector2(639, 202)
shape = SubResource("RectangleShape2D_a2s0x")

[node name="Top" type="CollisionShape2D" parent="SheepNoGoZone"]
position = Vector2(289, 14)
shape = SubResource("RectangleShape2D_pww50")

[node name="Bottom" type="CollisionShape2D" parent="SheepNoGoZone"]
position = Vector2(290.25, 394)
shape = SubResource("RectangleShape2D_pww50")

[connection signal="timeout" from="MasterCallTimer" to="." method="_on_master_call_timer_timeout"]
[connection signal="timeout" from="CallLoop" to="." method="_on_call_loop_timeout"]
[connection signal="finished" from="MainMusic" to="." method="_on_audio_stream_player_finished"]
